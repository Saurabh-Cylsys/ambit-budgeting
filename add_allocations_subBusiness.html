<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>AMBIT</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/responsive.css" />
  </head>
  <style>
    .list-group-item:first-child {
      border-top-left-radius: inherit;
      border-top-right-radius: inherit;
    }

    #list-style {
      border: 0;
      border-left: 5px solid;
      font-size: smaller;
      font-weight: 400;
      margin-top: 0.5rem;
    }

    /* Style for the container */
    .percentage-container {
      display: flex;
      align-items: center;
    }

    /* Style for the input box */
    .percentage-input,
    .percentage-input:focus {
      width: 100px;
      padding: 5px;
      font-size: 1em;
      text-align: right;
      border: none;
      outline: none;
    }

    /* Style for the percentage symbol */
    .percentage-symbol {
      margin-left: 5px;
      font-size: 1em;
    }
  </style>
  <style>
    .list-group-item:first-child {
      border-top-left-radius: inherit;
      border-top-right-radius: inherit;
    }

    #list-style {
      border: 0;
      border-left: 5px solid;
      font-size: smaller;
      font-weight: 400;
      margin-top: 0.5rem;
    }

    /* Style for the container */
    .percentage-container {
      display: flex;
      align-items: center;
    }

    /* Style for the input box */
    .percentage-input,
    .percentage-input:focus {
      width: 100px;
      padding: 5px;
      font-size: 1em;
      text-align: right;
      border: none;
      outline: none;
    }

    /* Style for the percentage symbol */
    .percentage-symbol {
      margin-left: 5px;
      font-size: 1em;
    }
  </style>

  <body>
    <header file-include-html="assets/includes/header.html"></header>

    <main>
      <div class="container-fluid py-3">
        <div class="row">
          <div class="col-md-12">
            <div class="card-body p-0">
              <div class="container-fluid">
                <div class="row">
                  <div
                    class="col-md-3 collapse collapse-horizontal show p-0"
                    file-include-html="assets/includes/sidebar.html"
                    id="collapseWidthExample"
                  ></div>
                  <div class="col card" id="main">
                    <div class="row align-items-center">
                      <div class="col-6 my-2">
                        <h1 class="m-0">Add Sub Allocation</h1>
                      </div>
                      <hr />

                      <div class="col-12">
                        <div class="row">
                          <div class="col-md-4">
                            <label for="yourUsername" class="form-label m-0"
                              >Business Name</label
                            >
                            <select name="" id="" class="form-select">
                              <option value="" selected disabled>Select business name</option>
                              <option value="">Group Corporate Office / GCO</option>
                              <option value="">Private Client / PC</option>
                              <option value="">Management / AM</option>
                              <option value="">Institutional Equities / IE</option>
                              <option value="">Investment Banking / IB</option>
                              <option value="">SME Lending /
                                SMEL</option>
                            </select>
                          </div>
                          <div class="col-md-4">
                            <label for="periodCycle">Sub Allocation Name</label>
                            <input
                              type="text"
                              name=""
                              id=""
                              class="form-control"
                              placeholder="Enter sub allocation name"
                            />
                          </div>

                          <div class="col-md-4">
                            <label for="periodCycle">Financial Year</label>
                            <select
                              class="form-control"
                              id="periodCycle"
                              required
                            >
                              <option value="">Select Year</option>
                              <option value="Q1">FY 2024 - FY 2025</option>
                              <option value="Q2">FY 2023 - FY2024</option>
                            </select>
                          </div>
                          

                          <div class="col-12 mt-4">
                            <div
                              class="table-responsive rounded-3 border bookmakerTable"
                            >
                              <table class="table m-0">
                                <thead>
                                  <!-- <tr>
                                  <th scope="col" rowspan="2" class=" align-middle" style="    white-space: nowrap;">
                                    Budget Sub Head</th>
                                  <th colspan="7" class="text-center align-middle">Business Name</th>
                                  <th scope="col" rowspan="2" class="text-center align-middle">Total
                                  </th>

                                </tr> -->
                                  <tr>
                                    <th
                                      scope="col"
                                      rowspan="1"
                                      class="align-middle"
                                      style="white-space: nowrap"
                                    >
                                      Allocation Method
                                    </th>
                                    <th
                                      scope="col"
                                      rowspan="1"
                                      class="text-end align-middle"
                                    >
                                      Department A
                                    </th>
                                    <th
                                      scope="col"
                                      rowspan="1"
                                      class="text-end align-middle"
                                    >
                                      Department B
                                    </th>
                                    <th
                                      scope="col"
                                      rowspan="1"
                                      class="text-end align-middle"
                                    >
                                      Department C
                                    </th>
                                    <th
                                      scope="col"
                                      class="text-end align-middle"
                                    >
                                      Department D
                                    </th>
                                    <th
                                      scope="col"
                                      class="text-end align-middle"
                                    >
                                      Department E
                                    </th>
                                    <th
                                      scope="col"
                                      rowspan="1"
                                      class="text-center align-middle"
                                    >
                                      Total
                                    </th>
                                    <th>Action</th>
                                  </tr>
                                </thead>
                                <tbody id="approvalTable">
                                  <tr>
                                    <td
                                      class="align-middle"
                                      style="white-space: nowrap"
                                    >
                                      <input
                                        type="text"
                                        id="percentage"
                                        class="form-control border-bottom"
                                        placeholder="Enter Allocation Method"
                                      />
                                    </td>
                                    <td
                                      class="text-center align-middle"
                                      style="white-space: nowrap"
                                    >
                                      <!-- Input field for percentage -->
                                      <input
                                        type="text"
                                        id="percentage"
                                        class="percentage-input border-1"
                                        min="0"
                                        max="100"
                                        placeholder="0"
                                      />
                                      <!-- Percentage symbol -->
                                      <span class="percentage-symbol">%</span>
                                    </td>
                                    <td
                                      class="text-center align-middle"
                                      style="white-space: nowrap"
                                    >
                                      <!-- Input field for percentage -->
                                      <input
                                        type="text"
                                        id="percentage"
                                        class="percentage-input border-1"
                                        min="0"
                                        max="100"
                                        placeholder="0"
                                      />
                                      <!-- Percentage symbol -->
                                      <span class="percentage-symbol">%</span>
                                    </td>
                                    <td
                                      class="text-center align-middle"
                                      style="white-space: nowrap"
                                    >
                                      <!-- Input field for percentage -->
                                      <input
                                        type="text"
                                        id="percentage"
                                        class="percentage-input border-1"
                                        min="0"
                                        max="100"
                                        placeholder="0"
                                      />
                                      <!-- Percentage symbol -->
                                      <span class="percentage-symbol">%</span>
                                    </td>
                                    <td
                                      class="text-center align-middle"
                                      style="white-space: nowrap"
                                    >
                                      <!-- Input field for percentage -->
                                      <input
                                        type="text"
                                        id="percentage"
                                        class="percentage-input border-1"
                                        min="0"
                                        max="100"
                                        placeholder="0"
                                      />
                                      <!-- Percentage symbol -->
                                      <span class="percentage-symbol">%</span>
                                    </td>
                                    <td
                                      class="text-center align-middle"
                                      style="white-space: nowrap"
                                    >
                                      <!-- Input field for percentage -->
                                      <input
                                        type="text"
                                        id="percentage"
                                        class="percentage-input border-1"
                                        min="0"
                                        max="100"
                                        placeholder="0"
                                      />
                                      <!-- Percentage symbol -->
                                      <span class="percentage-symbol">%</span>
                                    </td>
                                    <td
                                      class="text-center font-weight-bold align-middle"
                                    >
                                      100.00%
                                    </td>
                                    <td class="d-flex border-0">
                                      <i
                                        class="bi bi-plus-circle-fill mx-2"
                                        onclick="addRow()"
                                      ></i>
                                      <i
                                        class="bi bi-dash-circle-fill mx-2"
                                        onclick="deleteRow(this)"
                                      ></i>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                            <div class="float-end mb-2">
                              <a
                                class="btn btn-dark mt-2"
                                href="allocation_master.html"
                                >Save</a
                              >&nbsp;
                              <a class="btn btn-danger mt-2" href="">Cancel</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!--  JS Files -->
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/include.js"></script>
    <script src="assets/js/custom.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Common function to handle multi-select dropdowns
        function handleDropdown(dropdownId, label) {
          const dropdownButton = document.getElementById(dropdownId);
          const dropdownMenu = dropdownButton.nextElementSibling;
          const checkboxes = dropdownMenu.querySelectorAll(
            'input[type="checkbox"]'
          );
          let selectedValues = [];

          // Toggle dropdown menu on button click
          dropdownButton.addEventListener("click", function () {
            dropdownMenu.classList.toggle("show");
          });

          // Update dropdown button text based on selections
          function updateDropdownText() {
            const selectedItems = Array.from(checkboxes)
              .filter((checkbox) => checkbox.checked)
              .map((checkbox) => checkbox.parentNode.textContent.trim());

            if (selectedItems.length > 0) {
              dropdownButton.innerHTML = `<label for="${dropdownId}">${label}</label><br> ${selectedItems.join(
                ", "
              )}`;
            } else {
              dropdownButton.innerHTML = `<label for="${dropdownId}">${label}</label><br> Select ${label} Type`;
            }
          }

          // Add event listener to checkboxes
          checkboxes.forEach((checkbox) => {
            checkbox.addEventListener("change", function () {
              const value = this.value;

              if (this.checked) {
                selectedValues.push(value);
              } else {
                selectedValues = selectedValues.filter(
                  (item) => item !== value
                );
              }

              updateDropdownText();
            });
          });

          // Close dropdown when clicking outside
          document.addEventListener("click", function (event) {
            if (
              !dropdownButton.contains(event.target) &&
              !dropdownMenu.contains(event.target)
            ) {
              dropdownMenu.classList.remove("show");
            }
          });
        }

        // Initialize dropdowns for Company and Widgets only
        handleDropdown("companyDropdown", "Company");
        handleDropdown("widgetsDropdown", "Widgets");
      });
    </script>

    <script>
      function addRow() {
        const table = document.getElementById("approvalTable");
        const newRow = table.rows[0].cloneNode(true);

        // Clear the dropdown selections and text in the new row
        newRow
          .querySelectorAll("select")
          .forEach((select) => (select.selectedIndex = 0));

        // Add new row to table
        table.appendChild(newRow);
      }

      function deleteRow(button) {
        const row = button.parentNode.parentNode;
        const table = document.getElementById("approvalTable");

        // Ensure at least one row remains
        if (table.rows.length > 1) {
          row.remove();
        }
      }
    </script>
  </body>
</html>
